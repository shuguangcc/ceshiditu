import{hv as v,dH as z,as as w,u as N,aV as S,hz as b,hA as f,hB as A,hC as B,hD as d,rz as D,hx as U,hy as P,rA as j,rB as E,rC as $,rD as g,hw as F}from"./index-74d49a87.js";function R(e,a,t,s){return e.name?e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?L(e,a,s):v(e,a,s).then(n=>H(z(n),e.name,a,t,s)):Promise.reject(new w("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function H(e,a,t,s,n){var p;const u=e.data,m=t&&N(t.portal)?t.portal:S.getDefault(),c={portal:m,url:b(e.baseUrl),origin:"portal-item"},o=u.items.find(r=>r.name===a);if(!o){const r=`The symbol name '${a}' could not be found`;return Promise.reject(new w("symbolstyleutils:symbol-name-not-found",r,{symbolName:a}))}let i=f(A(o,s),c),y=((p=o.thumbnail)==null?void 0:p.href)??null;const h=o.thumbnail&&o.thumbnail.imageData;B()&&(i=d(i)??"",y=d(y));const x={portal:m,url:b(D(i)),origin:"portal-item"};return U(i,n).then(r=>{const C=s==="cimRef"?P(r.data):r.data,l=j(C,x);if(l&&E(l)){if(y){const O=f(y,c);l.thumbnail=new $({url:O})}else h&&(l.thumbnail=new $({url:`data:image/png;base64,${h}`}));e.styleUrl?l.styleOrigin=new g({portal:t.portal,styleUrl:e.styleUrl,name:a}):e.styleName&&(l.styleOrigin=new g({portal:t.portal,styleName:e.styleName,name:a}))}return l})}function L(e,a,t){const s=F.replace(/\{SymbolName\}/gi,e.name),n=N(a.portal)?a.portal:S.getDefault();return U(s,t).then(u=>{const m=P(u.data);return j(m,{portal:n,url:b(D(s)),origin:"portal-item"})})}export{H as fetchSymbolFromStyle,R as resolveWebStyleSymbol};
