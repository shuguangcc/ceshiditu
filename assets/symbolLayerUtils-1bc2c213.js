import{_ as h}from"./preload-helper-41c905a7.js";import{U as d}from"./request-d3e98716.js";import{a as n}from"./Error-653283ae.js";import{e as b}from"./ItemCache-ee28c7ba.js";import{r as a,f as w}from"./typedArrayUtil-a8b5b3e9.js";import{F as v,a as z}from"./aaBoundingBox-fc742a4e.js";import{t as _,c as g}from"./symbolLayerUtils3D-1f8d4478.js";import"./string-cdf077e6.js";import"./promiseUtils-6684e352.js";import"./MemCache-4b976a8b.js";import"./cast-7928d7aa.js";import"./ensureType-cf29afa9.js";import"./nextTick-3ee5a785.js";import"./Extent-69509002.js";import"./Ellipsoid-89682c5e.js";import"./aaBoundingRect-4a760199.js";import"./mathUtils-2519596a.js";import"./vec3-a020a6f6.js";import"./vec3f64-2f9cef06.js";import"./common-c186b691.js";import"./vec4-790471c0.js";let s=c();function c(){return new b(50)}function M(){s=c()}function N(r,e){if(r.type==="icon")return p(r,e);if(r.type==="object")return f(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function W(r,e){if(r.type==="icon")return j(r,e);if(r.type==="object")return B(r,e);throw new n("symbol3d:unsupported-symbol-layer","computeLayerSize only works with symbol layers of type Icon and Object")}async function p(r,e){var t,i;if((t=r.resource)!=null&&t.href)return L(r.resource.href).then(o=>[o.width,o.height]);if((i=r.resource)!=null&&i.primitive)return a(e)?[e,e]:[256,256];throw new n("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function j(r,e){return p(r,e).then(t=>{if(r.size==null)return t;const i=t[0]/t[1];return i>1?[r.size,r.size/i]:[r.size*i,r.size]})}function L(r){return d(r,{responseType:"image"}).then(e=>e.data)}function f(r,e){return S(r,e).then(t=>v(t))}async function B(r,e){const t=await f(r,e);return _(t,r)}async function S(r,e){var i;if(!r.isPrimitive){const o=w((i=r.resource)==null?void 0:i.href),u=s.get(o);if(u!==void 0)return u;const y=await h(()=>import("./objectResourceUtils-ef6e3cdf.js").then(l=>l.Q),["./objectResourceUtils-ef6e3cdf.js","./devEnvironmentUtils-5002a058.js","./typedArrayUtil-a8b5b3e9.js","./mat3-3fc68e72.js","./common-c186b691.js","./mat3f64-c6305894.js","./mat4-44a0988f.js","./vec3f64-2f9cef06.js","./mat4f64-1e28eae0.js","./vec3-a020a6f6.js","./aaBoundingBox-fc742a4e.js","./Extent-69509002.js","./cast-7928d7aa.js","./string-cdf077e6.js","./Error-653283ae.js","./ensureType-cf29afa9.js","./nextTick-3ee5a785.js","./promiseUtils-6684e352.js","./Ellipsoid-89682c5e.js","./aaBoundingRect-4a760199.js","./mathUtils-2519596a.js","./vec4-790471c0.js","./BufferView-646ba1de.js","./vec2-2cef68de.js","./vec33-ce3aa99b.js","./DefaultMaterial_COLOR_GAMMA-9831d979.js","./types-e1c0a5bf.js","./request-d3e98716.js","./preload-helper-41c905a7.js","./asyncUtils-62e8a185.js","./enums-64ab819c.js","./Version-9baeb7ac.js","./quat-5b263584.js","./quatf64-7fd38d64.js","./compilerUtils-034cacb8.js","./mat3f32-d3d088e8.js","./vec2f32-461e65a9.js","./byteSizeEstimations-f0cab514.js","./VisualVariablePassParameters-5807c7dc.js","./VertexAttribute-9c5c630d.js","./VertexElementDescriptor-2925c6af.js","./FramebufferObject-50e1b68f.js","./Texture-e79b14e7.js","./context-util-1e3c8cfc.js","./ShaderBuilder-93e8045e.js","./basicInterfaces-19ed850e.js","./ViewingMode-5d7d590b.js","./Util-a48361c6.js","./vec2f64-30dc1443.js","./vec4f64-e407da96.js","./sphere-4f5e644f.js","./lineSegment-e6f72ff2.js","./Texture-bbae5d9d.js","./Evented-515b9d9c.js","./TextureOnly.glsl-18701a3b.js","./ScreenSpacePass-00f8c8a4.js","./Float4PassUniform-3a47b7b3.js","./Texture2DPassUniform-6e8ae673.js","./assets-0b172f07.js","./InterleavedLayout-5e9cf734.js","./Matrix3PassUniform-da8eddae.js","./MixExternalColor.glsl-25f0049c.js","./ForwardLinearDepth.glsl-36f9eb3b.js","./vec3f32-c9aa289f.js","./View.glsl-8b12b8c2.js","./mat4f32-77b3d8ac.js","./ShaderTechniqueConfiguration-9f5b4555.js","./symbolColorUtils-604c5345.js","./PhysicallyBasedRendering.glsl-a986c926.js","./FloatPassUniform-d2dfc562.js","./RgbaFloatEncoding.glsl-6036ca34.js","./Texture2DDrawUniform-22924c6f.js","./PiUtils.glsl-0c0898f0.js","./Slice.glsl-a612de15.js","./Transform.glsl-f15542a7.js","./ObjectAndLayerIdColor.glsl-73c19386.js","./OutputDepth.glsl-179f1d8f.js","./OutputHighlight.glsl-7364b03b.js","./VisualVariables.glsl-b8290512.js","./DiscardOrAdjustAlphaBlend.glsl-5f837994.js","./AlphaCutoff-96178e0d.js","./TransparencyPassType-cd195b0e.js","./Normals.glsl-90e28525.js","./EvaluateSceneLighting.glsl-3bbc6edf.js","./SSAOBlur.glsl-c6f142fc.js","./ReadLinearDepth.glsl-7ff30f7d.js","./SSAO.glsl-6f3b4065.js","./DefaultMaterial.glsl-b4f4cbc5.js","./VertexColor.glsl-db21b96c.js","./VerticalOffset.glsl-86460edb.js","./MultipassTerrainTest.glsl-e79d40de.js","./DefaultTechniqueConfiguration-e8962072.js","./RealisticTree.glsl-2b30ed32.js"],import.meta.url),m=await y.fetch(o,{disableTextures:!0});return s.put(o,m.referenceBoundingBox),m.referenceBoundingBox}let t=null;if(r.resource&&r.resource.primitive&&(t=z(g(r.resource.primitive)),a(e)))for(let o=0;o<t.length;o++)t[o]*=e;return t?Promise.resolve(t):Promise.reject(new n("symbol:invalid-resource","The symbol does not have a valid resource"))}export{M as clearBoundingBoxCache,p as computeIconLayerResourceSize,N as computeLayerResourceSize,W as computeLayerSize,f as computeObjectLayerResourceSize};
