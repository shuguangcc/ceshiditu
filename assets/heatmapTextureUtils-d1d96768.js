import{a as r}from"./Error-653283ae.js";import{f as G}from"./typedArrayUtil-a8b5b3e9.js";import{G as T,L as o,P as a,U as h}from"./enums-64ab819c.js";function g(u,s){const{textureFloat:e,colorBufferFloat:t}=u.capabilities,_=e==null?void 0:e.textureFloat,F=e==null?void 0:e.textureFloatLinear,m=e==null?void 0:e.textureHalfFloat,E=e==null?void 0:e.textureHalfFloatLinear,R=e==null?void 0:e.HALF_FLOAT,p=t==null?void 0:t.textureFloat,l=t==null?void 0:t.textureHalfFloat,d=t==null?void 0:t.floatBlend,{floatBufferBlendWorking:n}=G(u.driverTest);if(!_&&!m)throw new r("heatmap:missing-texture-float","HeatmapRenderer requires WebGL2 or the WebGL1 extension OES_texture_float or OES_texture_half_float.");if(!p&&!l)throw new r("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(d&&n||l))throw new r("heatmap:missing-float-blend","HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float."+(n?"":" This device claims support for EXT_float_blend, but does not actually support it."));const c=_&&p&&d&&n,L=m&&l,i=F,f=E,x=!!(t!=null&&t.R32F),b=!!(t!=null&&t.R16F);if(c&&(i||!f))return i||s.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),{dataType:T.FLOAT,samplingMode:i?o.LINEAR:o.NEAREST,pixelFormat:x?a.RED:a.RGBA,internalFormat:x?h.R32F:a.RGBA};if(L)return f||s.warnOnce("Missing WebGL extension OES_texture_half_float_linear. Heatmap quality may be reduced."),{dataType:R,samplingMode:f?o.LINEAR:o.NEAREST,pixelFormat:b?a.RED:a.RGBA,internalFormat:b?h.R16F:a.RGBA};throw new r("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.")}export{g as n};
