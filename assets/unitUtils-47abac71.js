import"./string-cdf077e6.js";import{o as d}from"./jsonMap-c1f958cf.js";import{r as u,i as T,t as U}from"./typedArrayUtil-a8b5b3e9.js";import{k as w,P as G,s as _,n as E,C as P,A as D,j as N}from"./Extent-69509002.js";import{s as m,t as h,e as q}from"./Ellipsoid-89682c5e.js";function I(e){return new w({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const X=I(m),k=I(h),S=I(q),me=new w({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${m.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function fe(e){return e&&(G(e)||e===k)?k:e&&(_(e)||e===S)?S:X}function x(e){return u(e)&&(G(e)||e===k)?h:u(e)&&(_(e)||e===S)?q:m}function Ue(e){return E(e)?h:P(e)?q:m}const de=39.37,v=m.radius*Math.PI/200,y=/UNIT\[([^\]]+)\]\]$/i,o=N,A=/UNIT\[([^\]]+)\]/i,F=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),W=d()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),a=e=>e*e,c=e=>e*e*e,f={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:a(.001)},"square-centimeters":{inBaseUnits:a(.01)},"square-decimeters":{inBaseUnits:a(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:a(1e3)},"square-inches":{inBaseUnits:a(.0254)},"square-feet":{inBaseUnits:a(.3048)},"square-yards":{inBaseUnits:a(.9144)},"square-miles":{inBaseUnits:a(1609.344)},"square-us-feet":{inBaseUnits:a(1200/3937)},acres:{inBaseUnits:.0015625*a(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*c(.001)},"cubic-centimeters":{inBaseUnits:1e3*c(.01)},"cubic-decimeters":{inBaseUnits:1e3*c(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*c(1e3)},"cubic-inches":{inBaseUnits:1e3*c(.0254)},"cubic-feet":{inBaseUnits:1e3*c(.3048)},"cubic-yards":{inBaseUnits:1e3*c(.9144)},"cubic-miles":{inBaseUnits:1e3*c(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},J=(()=>{const e={};for(const s in f)for(const t in f[s].units)e[t]=s;return e})();function K(e,s,t){return e*f[t].units[s].inBaseUnits}function Z(e,s,t){return e/f[t].units[s].inBaseUnits}const O=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],L=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function b(e){const s=J[e];if(!s)throw new Error("unknown type");return s}function p(e,s=null){return s=s||b(e),f[s].baseUnit===e}function l(e,s,t){if(s===t)return e;const n=b(s);if(n!==b(t))throw new Error("incompatible units");const r=p(s,n)?e:K(e,s,n);return p(t,n)?r:Z(r,t,n)}function he(e,s,t){switch(t){case"metric":return j(e,s);case"imperial":return Q(e,s);default:return t}}function qe(e,s,t){switch(t){case"metric":return z(e,s);case"imperial":return V(e,s);default:return t}}function j(e,s){const t=l(e,s,"meters");return Math.abs(t)<3e3?"meters":"kilometers"}function z(e,s){const t=l(e,s,"meters");return Math.abs(t)<1e5?"meters":"kilometers"}function Q(e,s){const t=l(e,s,"feet");return Math.abs(t)<1e3?"feet":"miles"}function V(e,s){const t=l(e,s,"feet");return Math.abs(t)<1e5?"feet":"miles"}function Be(e,s){const t=l(e,s,"square-meters");return Math.abs(t)<3e6?"square-meters":"square-kilometers"}function ke(e,s){const t=l(e,s,"square-feet");return Math.abs(t)<1e6?"square-feet":"square-miles"}function Se(e,s,t){return l(e,s,"meters")/(t*Math.PI/180)}function ee(e){return W.fromJSON(e.toLowerCase())||null}function be(e){if(u(e)&&!D(e))return 1;const s=R(e);return s>1e5?1:s}function se(e){return R(e)>=x(e).metersPerDegree?"meters":B(e)}function R(e,s=m.metersPerDegree){return T(te(e,!0),s)}function te(e,s=!1){const t=u(e)?e.wkid:null,n=u(e)?e.wkt:null;let r=null;if(t){if(E(t))return h.metersPerDegree;if(P(t))return q.metersPerDegree;r=o.values[o[t]],!r&&s&&F.has(t)&&(r=v)}else n&&(C(n)?r=M(y.exec(n),r):H(n)&&(r=M(A.exec(n),r)));return r}function M(e,s){return e&&e[1]?g(e[1]):s}function g(e){return parseFloat(e.split(",")[1])}function B(e){const s=u(e)?e.wkid:null,t=u(e)?e.wkt:null;let n=null;if(s)n=o.units[o[s]];else if(t){const r=C(t)?y:H(t)?A:null;if(r){const i=r.exec(t);i&&i[1]&&(n=re(i[1]))}}return u(n)?ee(n):null}function Ie(e){const s=B(e);return U(s)||!O.includes(s)?null:s}function pe(e){const s=se(e);return U(s)||!O.includes(s)?null:s}function Me(e){const s=B(e);return U(s)?null:L.get(s)}function H(e){return/^GEOCCS/i.test(e)}function C(e){return/^PROJCS/i.test(e)}const ne=1e-7;function re(e){const s=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let t=s&&s[1];if(!t||!o.units.includes(t)){const n=g(e);t=null;const r=o.values;for(let i=0;i<r.length;++i)if(Math.abs(n-r[i])<ne){t=o.units[i];break}}return t}function ie(e){const s=B(e);if(U(s))return null;switch(s){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}function Te(e){var r,i;const s="metric";if(U(e))return s;const t=e.map,n=t&&"portalItem"in t?(r=t.portalItem)==null?void 0:r.portal:null;if(n)switch(((i=n==null?void 0:n.user)==null?void 0:i.units)??n.units){case s:return s;case"english":return"imperial"}return T(ie(e.spatialReference),s)}const Y={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},$={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},we=d()(Y),Ge=d()($);d()({...Y,...$});export{R as $,Be as A,l as E,ee as G,X as I,z as J,Q as K,be as L,he as N,j as O,b as P,V as R,ke as T,se as W,B as X,Se as Y,Ie as Z,fe as a,k as b,S as c,Te as d,pe as e,de as f,Ue as g,we as l,Ge as m,me as p,Me as s,x as u,qe as v};
