import{e as r,y as f,n as v,m as rt}from"./cast-7928d7aa.js";import{i as ft,r as u,t as dt,o as Q,s as tt}from"./typedArrayUtil-a8b5b3e9.js";import"./ensureType-cf29afa9.js";import{l as x,w as z}from"./reactiveUtils-f41a4e00.js";import"./Error-653283ae.js";import"./string-cdf077e6.js";import"./intl-f1e98361.js";import{x as et,F as $t,S as gt,k as _t,z as bt,c as lt,q as wt,a as g}from"./quantityFormatUtils-ba1f6cd1.js";import{d as yt}from"./unitUtils-47abac71.js";import{e as it,M as H,n as s,f as Tt}from"./widget-f7489a3f.js";import{m as C}from"./number-347a3a44.js";import{h as ct,p as pt,R as y,d as R,j as Lt}from"./euclideanLengthMeasurementUtils-3ebdcf15.js";import{n as T}from"./vec3f64-2f9cef06.js";import{geodesicLength as ht}from"./geometryEngine-62e3ccf4.js";import{w as nt,F as xt}from"./projection-d7b57a6c.js";import{bJ as zt,aO as I,bK as Ct,aN as Et}from"./index-455b69b8.js";import{i as kt,m as Ot,E as Rt}from"./Extent-69509002.js";let E=class extends rt{constructor(i){super(i)}};r([f()],E.prototype,"tooltipOptions",void 0),E=r([v("esri.views.interactive.tooltip.SketchTooltipInfo")],E);const L="esri-tooltip",l=`${L}-content`;let h=class extends H{get _units(){const t=yt(this.tooltip.view);return{length:t,verticalLength:t,area:t}}_formatScale(t){return C(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return C(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,e,n){return et(this._messagesUnits,t,ft(e,this._units.length),n)}_formatRelativeLength(t){return $t(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return gt(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return _t(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return et(this._messagesUnits,t,this._units.length)}_formatArea(t){return bt(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return C(t.value,{style:"percent"})}};r([f()],h.prototype,"info",void 0),r([f()],h.prototype,"tooltip",void 0),r([f()],h.prototype,"_units",null),r([it("esri/core/t9n/Units"),f()],h.prototype,"_messagesUnits",void 0),r([it("esri/views/interactive/tooltip/t9n/Tooltip"),f()],h.prototype,"_messagesTooltip",void 0),h=r([v("esri.views.interactive.tooltip.content.TooltipContent")],h);const k=`${L}-field`,O={base:k,title:`${k}__title`,value:`${k}__value`};let a=class extends H{render(){return s("div",{class:O.base},s("div",{class:O.title},this.title),s("div",{class:O.value},this.value))}};r([f()],a.prototype,"title",void 0),r([f()],a.prototype,"value",void 0),a=r([v("esri.views.interactive.tooltip.support.TooltipField")],a);const Pt={base:`${L}-value-by-value`};let d=class extends H{constructor(){super(...arguments),this.divider="Ã—"}render(){return s("div",{class:Pt.base},s("span",null,this.left),s("span",null,this.divider),s("span",null,this.right))}};r([f()],d.prototype,"left",void 0),r([f()],d.prototype,"divider",void 0),r([f()],d.prototype,"right",void 0),d=r([v("esri.views.interactive.tooltip.support.ValueByValue")],d);const St={base:`${l} ${`${l}--draw-rectangle`}`};let P=class extends h{render(){const{area:t,radius:e,xSize:n,ySize:o,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return s("div",{class:St.base},p.radius&&u(e)&&s(a,{title:m.radius,value:this._formatLength(e)}),p.size&&u(n)&&u(o)&&s(a,{title:m.size,value:s(d,{left:this._formatLength(n),right:this._formatLength(o)})}),p.area&&s(a,{title:m.area,value:this._formatArea(t)}))}};P=r([v("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],P);const Vt={base:`${l} ${`${l}--draw-point`}`};let S=class extends h{render(){const{elevation:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,o=this._messagesTooltip.sketch;return s("div",{class:Vt.base},n.elevation&&s(a,{title:o.elevation,value:this._formatVerticalLength(t)}))}};S=r([v("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],S);const Ut={base:`${l} ${`${l}--draw-polygon`}`};let V=class extends h{render(){const{area:t,elevation:e,tooltipOptions:n,viewType:o}=this.info,{visibleElements:c}=n,p=this._messagesTooltip.sketch;return s("div",{class:Ut.base},c.elevation&&o!=="2d"&&s(a,{title:p.elevation,value:this._formatVerticalLength(e)}),c.area&&s(a,{title:p.area,value:this._formatArea(t)}))}};V=r([v("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],V);const Wt={base:`${l} ${`${l}--draw-polyline`}`};let U=class extends h{render(){const{elevation:t,totalLength:e,tooltipOptions:n,viewType:o}=this.info,{visibleElements:c}=n,p=this._messagesTooltip.sketch;return s("div",{class:Wt.base},c.elevation&&o!=="2d"&&s(a,{title:p.elevation,value:this._formatVerticalLength(t)}),c.totalLength&&s(a,{title:p.totalLength,value:this._formatLength(e)}))}};U=r([v("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],U);const At={base:`${l} ${`${l}--draw-rectangle`}`};let W=class extends h{render(){const{area:t,xSize:e,ySize:n,tooltipOptions:o}=this.info,{visibleElements:c}=o,p=this._messagesTooltip.sketch;return s("div",{class:At.base},c.size&&u(e)&&u(n)&&s(a,{title:p.size,value:s(d,{left:this._formatLength(e),right:this._formatLength(n)})}),c.area&&s(a,{title:p.area,value:this._formatArea(t)}))}};W=r([v("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],W);const Dt={base:`${l} ${`${l}--extent-rotate`}`};let A=class extends h{render(){const{angle:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,o=this._messagesTooltip.sketch;return s("div",{class:Dt.base},n.rotation&&s(a,{title:o.rotation,value:this._formatRelativeOrientation(t)}))}};A=r([v("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],A);const Ft={base:`${l} ${`${l}--extent-scale`}`};let D=class extends h{render(){const t=this.info,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return s("div",{class:Ft.base},e.size&&s(a,{title:n.size,value:s(d,{left:this._formatLength(t.xSize),right:this._formatLength(t.ySize)})}),e.scale&&s(a,{title:n.scale,value:s(d,{left:this._formatScale(t.xScale),right:this._formatScale(t.yScale)})}))}};D=r([v("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],D);const Zt={base:`${l} ${`${l}--reshape-edge-offset`}`};let F=class extends h{render(){const{area:t,distance:e,totalLength:n,tooltipOptions:o}=this.info,{visibleElements:c}=o,p=this._messagesTooltip.sketch;return s("div",{class:Zt.base},c.distance&&s(a,{title:p.distance,value:this._formatRelativeLength(e)}),c.area&&u(t)&&s(a,{title:p.area,value:this._formatArea(t)}),c.totalLength&&u(n)&&s(a,{title:p.totalLength,value:this._formatLength(n)}))}};F=r([v("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],F);const Mt={base:`${l} ${`${l}--transform-absolute`}`};let Z=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return s("div",{class:Mt.base},e.orientation&&t.orientationEnabled&&s(a,{title:n.orientation,value:lt(t.orientation,t.rotationType,t.orientationPrecision)}),e.size&&t.sizeEnabled&&s(a,{title:n.size,value:this._formatLength(t.size,t.sizeUnit,t.sizePrecision)}))}};Z=r([v("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],Z);const jt={base:`${l} ${`${l}--transform-rotate`}`};let M=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return s("div",{class:jt.base},e.rotation&&s(a,{title:n.rotation,value:wt(t.rotation,t.rotationType,t.rotationPrecision)}),e.orientation&&s(a,{title:n.orientation,value:lt(t.orientation,t.rotationType,t.orientationPrecision)}))}};M=r([v("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],M);const Gt={base:`${l} ${`${l}--transform-scale`}`};let j=class extends h{render(){const{scale:t,size:e,sizePrecision:n,sizeUnit:o,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return s("div",{class:Gt.base},p.scale&&s(a,{title:m.scale,value:this._formatPercentage(t)}),p.size&&s(a,{title:m.size,value:this._formatLength(e,o,n)}))}};j=r([v("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],j);const qt={base:`${l} ${`${l}--translate-graphic`}`};let G=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return s("div",{class:qt.base},e.distance&&s(a,{title:n.distance,value:this._formatLength(t.distance)}))}};G=r([v("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphic")],G);const Nt={base:`${l} ${`${l}--translate-graphic-xy`}`};let q=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return s("div",{class:Nt.base},e.distance&&s(a,{title:n.distance,value:this._formatRelativeLength(t.distance)}))}};q=r([v("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicXY")],q);const Xt={base:`${l} ${`${l}--translate-graphic-z`}`};let N=class extends h{render(){const{info:t}=this,{visibleElements:e}=t.tooltipOptions,n=this._messagesTooltip.sketch;return s("div",{class:Xt.base},e.distance&&s(a,{title:n.distance,value:this._formatRelativeVerticalLength(t.distance)}))}};N=r([v("esri.views.interactive.tooltip.content.TooltipContentTranslateGraphicZ")],N);const Yt={base:`${l} ${`${l}--translate-vertex`}`};let X=class extends h{render(){const{distance:t,elevation:e,area:n,totalLength:o,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return s("div",{class:Yt.base},p.distance&&s(a,{title:m.distance,value:this._formatLength(t)}),p.elevation&&u(e)&&s(a,{title:m.elevation,value:this._formatVerticalLength(e)}),p.area&&u(n)&&s(a,{title:m.area,value:this._formatArea(n)}),p.totalLength&&u(o)&&s(a,{title:m.totalLength,value:this._formatLength(o)}))}};X=r([v("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],X);const Bt={base:`${l} ${`${l}--translate-vertex`}`};let Y=class extends h{render(){const{area:t,distance:e,elevation:n,totalLength:o,tooltipOptions:c}=this.info,{visibleElements:p}=c,m=this._messagesTooltip.sketch;return s("div",{class:Bt.base},p.distance&&s(a,{title:m.distance,value:this._formatRelativeLength(e)}),p.elevation&&u(n)&&s(a,{title:m.elevation,value:this._formatVerticalLength(n)}),p.area&&u(t)&&s(a,{title:m.area,value:this._formatArea(t)}),p.totalLength&&u(o)&&s(a,{title:m.totalLength,value:this._formatLength(o)}))}};Y=r([v("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexXY")],Y);const Ht={base:`${l} ${`${l}--translate-vertex`}`};let B=class extends h{render(){const{distance:i,elevation:t,tooltipOptions:e}=this.info,{visibleElements:n}=e,o=this._messagesTooltip.sketch;return s("div",{class:Ht.base},n.distance&&s(a,{title:o.distance,value:this._formatRelativeVerticalLength(i)}),n.elevation&&u(t)&&s(a,{title:o.elevation,value:this._formatVerticalLength(t)}))}};B=r([v("esri.views.interactive.tooltip.content.TooltipContentTranslateVertexZ")],B);function It(i,t){if(dt(t))return null;const e=document.createElement("div");switch(t.type){case"draw-point":return new S({tooltip:i,info:t,container:e});case"draw-polygon":return new V({tooltip:i,info:t,container:e});case"draw-polyline":return new U({tooltip:i,info:t,container:e});case"draw-rectangle":return new W({tooltip:i,info:t,container:e});case"draw-circle":return new P({tooltip:i,info:t,container:e});case"extent-rotate":return new A({tooltip:i,info:t,container:e});case"extent-scale":return new D({tooltip:i,info:t,container:e});case"transform-absolute":return new Z({tooltip:i,info:t,container:e});case"transform-rotate":return new M({tooltip:i,info:t,container:e});case"transform-scale":return new j({tooltip:i,info:t,container:e});case"translate-graphic":return new G({tooltip:i,info:t,container:e});case"translate-graphic-z":return new N({tooltip:i,info:t,container:e});case"translate-graphic-xy":return new q({tooltip:i,info:t,container:e});case"translate-vertex":return new X({tooltip:i,info:t,container:e});case"translate-vertex-z":return new B({tooltip:i,info:t,container:e});case"translate-vertex-xy":return new Y({tooltip:i,info:t,container:e});case"reshape-edge-offset":return new F({tooltip:i,info:t,container:e})}}const Jt={base:`${L}`};let $=class extends rt{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const e=document.createElement("div");return e.classList.add(Jt.base),e})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.addHandles([x(()=>{var e;return(e=this.view.overlay)==null?void 0:e.surface},e=>{t.remove(),Q(e,n=>n.appendChild(t))},z),x(()=>this.info,(e,n)=>{u(this._contentWidget)&&u(e)&&u(n)&&e.type===n.type?this._contentWidget.info=e:(this._contentWidget=tt(this._contentWidget),Q(It(this,e),o=>{this._contentWidget=o,o.container&&t.appendChild(o.container)}))},z),x(()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint}),Kt,z)])}destroy(){this._contentWidget=tt(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get _screenPoint(){const t=this.view.inputManager;return t!=null&&t.multiTouchActive?null:t==null?void 0:t.latestPointerLocation}get test(){var t;return{contentContainer:this._contentContainer,visible:((t=this._contentContainer)==null?void 0:t.style.display)!=="none"}}};function Kt({container:i,contentWidget:t,screenPoint:e}){const{style:n}=i;if(u(e)&&u(t)){n.display="block";const o=Tt(i),c=`translate(${Math.round(e.x)+st[0]*(o?-1:1)}px, ${Math.round(e.y)+st[1]}px)`;n.transform=o?`translate(-100%, 0) ${c}`:c}else n.display="none"}r([f({nonNullable:!0})],$.prototype,"view",void 0),r([f()],$.prototype,"info",void 0),r([f()],$.prototype,"_contentContainer",void 0),r([f()],$.prototype,"_contentWidget",void 0),r([f()],$.prototype,"_screenPoint",null),$=r([v("esri.views.interactive.tooltip.Tooltip")],$);const st=[20,20];function vt(i,t,e,n,...o){return kt(i)&&zt(i)?t.apply(void 0,o):Ot(i)?e.apply(void 0,o):n.apply(void 0,o)}function ut(i){const{spatialReference:t}=i;return vt(t,ie,ne,se,i)}function mt(i,t){if(!Rt(i.spatialReference,t.spatialReference))return null;const{spatialReference:e}=i;return b[0]=i.x,b[1]=i.y,b[2]=i.hasZ?i.z:0,w[0]=t.x,w[1]=t.y,w[2]=t.hasZ?t.z:0,J(b,w,e)}function J(i,t,e){return vt(e,Qt,te,ee,i,t,e)}function Qt(i,t,e){return g(I(K,i,t,e).distance,"meters")}function te(i,t,e){return g(ht(oe(i,t,e),"meters"),"meters")}function ee(i,t,e){return nt(i,e,ot)&&nt(t,e,at)?g(I(K,ot,at).distance,"meters"):null}function ie(i){return g(Ct([i],"meters")[0],"meters")}function ne(i){return g(ht(i,"meters"),"meters")}function se(i){const t=[];if(!xt(i,t))return null;let e=0;for(const n of t){let o=0;for(let c=1;c<n.length;++c)o+=I(K,n[c-1],n[c]).distance;e+=o}return g(e,"meters")}function oe(i,t,e){return{type:"polyline",spatialReference:e,paths:[[[...i],[...t]]]}}const K=new Et,b=T(),w=T(),ot=T(),at=T();function Ge(i,t){return _(pt,ut,ct,t,i)}function qe(i,t,e,n){return _(Lt,J,R,n,i,t,e)}function Ne(i,t,e){return _(y,mt,y,e,i,t)}function Xe(i,t,e,n){return _(R,J,R,n,i,t,e)}function Ye(i){return _(pt,ut,ct,"on-the-ground",i)}function Be(i,t){return _(y,mt,y,"on-the-ground",i,t)}function _(i,t,e,n,...o){if(n==="on-the-ground"){const c=t.apply(void 0,o);return u(c)?c:e.apply(void 0,o)}return i.apply(void 0,o)}export{Ne as a,$ as b,Ye as c,qe as d,E as e,Xe as g,Be as h,J as l,Ge as m,vt as r};
