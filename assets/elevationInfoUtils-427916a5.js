import{t as c,r as s,i as f}from"./typedArrayUtil-a8b5b3e9.js";import{r as m}from"./ElevationInfo-ce9cacc2.js";function v(e){return e?x:P}function b(e,t){return c(t)||!t.mode?v(e).mode:t.mode}function E(e,t){return s(t)?t:v(e)}function g(e,t){return b(!!s(e)&&e.hasZ,t)}function I(e,t){return E(!!s(e)&&e.hasZ,t)}function p(e){const t=d(e);return g(e.geometry,t)}function w(e){const t=d(e),n=g(e.geometry,t);return{mode:n,offset:s(t)&&n!=="on-the-ground"?f(t.offset,0)*m(f(t.unit,"meters")):0}}function R(e){if(p(e)==="on-the-ground")return!1;const t=d(e),n=s(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!n||n==="0")}function d(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function j(e,t,n){if(c(n)||!n.mode)return;const o=e.hasZ?e.z:0,r=s(n.offset)?n.offset:0;switch(n.mode){case"absolute-height":return o-r;case"on-the-ground":return 0;case"relative-to-ground":return o-(f(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+r);case"relative-to-scene":return o-(f(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+r)}}function k(e,t,n,o=null){return h(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,o)}function q(e,t,n,o,r=null){return h(e,t[0],t[1],t.length>2?t[2]:0,n,o,r)}function h(e,t,n,o,r,a,u=null){if(c(a))return;const i=s(u)?u.mode:"absolute-height";if(i==="on-the-ground")return 0;const{absoluteZ:l}=Z(t,n,o,r,e,a);return y(l,t,n,o,r,e,u,i)}function Z(e,t,n,o,r,a){const u=s(a.offset)?a.offset:0;switch(a.mode){case"absolute-height":return{absoluteZ:n+u,elevation:0};case"on-the-ground":{const i=f(r.elevationProvider.getElevation(e,t,0,o,"ground"),0);return{absoluteZ:i,elevation:i}}case"relative-to-ground":{const i=f(r.elevationProvider.getElevation(e,t,n,o,"ground"),0);return{absoluteZ:n+i+u,elevation:i}}case"relative-to-scene":{const i=f(r.elevationProvider.getElevation(e,t,n,o,"scene"),0);return{absoluteZ:n+i+u,elevation:i}}}}function y(e,t,n,o,r,a,u,i){const l=s(u)&&s(u.offset)?u.offset:0;switch(i){case"absolute-height":return e-l;case"relative-to-ground":return e-(f(a.elevationProvider.getElevation(t,n,o,r,"ground"),0)+l);case"relative-to-scene":return e-(f(a.elevationProvider.getElevation(t,n,o,r,"scene"),0)+l)}}function A(e,t){if(c(t))return!1;const{mode:n}=t;return s(n)&&(e==="scene"&&n==="relative-to-scene"||e==="ground"&&n!=="absolute-height")}const x={mode:"absolute-height",offset:0},P={mode:"on-the-ground",offset:null};function B(e,t){return e===t||s(e)&&s(t)&&e.mode===t.mode&&e.offset===t.offset}export{x as E,I as a,Z as b,R as c,j as d,w as f,k as g,q as h,g as i,p as l,E as s,b as u,B as x,A as y};
