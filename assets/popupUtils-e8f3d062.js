import{t as c,r as l}from"./typedArrayUtil-a8b5b3e9.js";import{C as m,T as h}from"./fieldUtils-31bfecd2.js";async function x(e,p=e.popupTemplate){if(c(p))return[];const n=await p.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:o}=p,{objectIdField:d,typeIdField:a,globalIdField:s,relationships:u}=e;if(n.includes("*"))return["*"];const r=o?await m(e):[],t=h(e.fieldsIndex,[...n,...r]);return a&&t.push(a),t&&d&&e.fieldsIndex.has(d)&&!t.includes(d)&&t.push(d),t&&s&&e.fieldsIndex.has(s)&&!t.includes(s)&&t.push(s),u&&u.forEach(f=>{const{keyField:i}=f;t&&i&&e.fieldsIndex.has(i)&&!t.includes(i)&&t.push(i)}),t}function F(e,p){return e.popupTemplate?e.popupTemplate:l(p)&&p.defaultPopupTemplateEnabled&&l(e.defaultPopupTemplate)?e.defaultPopupTemplate:null}export{x as d,F as s};
