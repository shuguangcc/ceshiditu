import{q as R,V as y,K as f,P as a,t as u,e as p,al as d}from"./arcadeUtils-b28b36c7.js";import{u as l,h as w}from"./SpatialFilter-88b393bc.js";import{p as s}from"./Extent-69509002.js";import{R as F,m as I,S as A,x as P,O as g,p as C,h}from"./geometryEngineAsync-e545efc5.js";import"./geometry-5a216427.js";import"./ensureType-cf29afa9.js";import"./string-cdf077e6.js";import"./typedArrayUtil-a8b5b3e9.js";import"./Error-653283ae.js";import"./Polyline-bf268e7b.js";import"./cast-7928d7aa.js";import"./nextTick-3ee5a785.js";import"./promiseUtils-6684e352.js";import"./typeUtils-eb9416d0.js";import"./jsonMap-c1f958cf.js";import"./preload-helper-41c905a7.js";import"./datetime-4f774298.js";import"./number-bd3c06fb.js";import"./locale-30120714.js";import"./Field-f5fc9f6b.js";import"./enumeration-3c281341.js";import"./fieldType-b1002185.js";import"./jsonUtils-03c4af61.js";import"./featureConversionUtils-01cdde8a.js";import"./OptimizedFeature-3de538c1.js";import"./OptimizedFeatureSet-1d1ac4b9.js";import"./request-d3e98716.js";import"./unitUtils-47abac71.js";import"./Ellipsoid-89682c5e.js";import"./hash-0ddfbf4b.js";import"./Portal-8b65c9c4.js";import"./Loadable-48bc1293.js";import"./Promise-dfdee8ba.js";import"./PortalGroup-bfe93c76.js";import"./PortalUser-4c8e1adc.js";import"./sizeVariableUtils-d4870b0d.js";import"./WhereClause-2b5b05b2.js";import"./FieldsIndex-aa6dd3fa.js";import"./fieldUtils-31bfecd2.js";import"./arcadeOnDemand-c6d1b9f2.js";import"./workers-898a7c4c.js";import"./Connection-a681777e.js";import"./Queue-3a0c055d.js";import"./assets-0b172f07.js";import"./intl-f1e98361.js";import"./number-347a3a44.js";import"./messages-be07754e.js";function c(t){return t instanceof s}function o(t,e,i,m){return m(t,e,async(S,n,r)=>{if(r.length<2)throw new u(t,p.WrongNumberOfParameters,e);if((r=R(r))[0]===null&&r[1]===null)return!1;if(a(r[0])){if(r[1]instanceof s)return new w({parentfeatureset:r[0],relation:i,relationGeom:r[1]});if(r[1]===null)return new l({parentfeatureset:r[0]});throw new u(t,p.InvalidParameter,e)}if(c(r[0])){if(c(r[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":return h(d(r[0]),d(r[1]));case"esriSpatialRelIntersects":return h(r[0],r[1]);case"esriSpatialRelContains":return C(r[0],r[1]);case"esriSpatialRelOverlaps":return g(r[0],r[1]);case"esriSpatialRelWithin":return P(r[0],r[1]);case"esriSpatialRelTouches":return A(r[0],r[1]);case"esriSpatialRelCrosses":return I(r[0],r[1])}throw new u(t,p.InvalidParameter,e)}if(a(r[1]))return new w({parentfeatureset:r[1],relation:i,relationGeom:r[0]});if(r[1]===null)return!1;throw new u(t,p.InvalidParameter,e)}if(r[0]!==null)throw new u(t,p.InvalidParameter,e);return a(r[1])?new l({parentfeatureset:r[1]}):!(r[1]instanceof s||r[1]===null)&&void 0})}function yr(t){t.mode==="async"&&(t.functions.intersects=function(e,i){return o(e,i,"esriSpatialRelIntersects",t.standardFunctionAsync)},t.functions.envelopeintersects=function(e,i){return o(e,i,"esriSpatialRelEnvelopeIntersects",t.standardFunctionAsync)},t.signatures.push({name:"envelopeintersects",min:2,max:2}),t.functions.contains=function(e,i){return o(e,i,"esriSpatialRelContains",t.standardFunctionAsync)},t.functions.overlaps=function(e,i){return o(e,i,"esriSpatialRelOverlaps",t.standardFunctionAsync)},t.functions.within=function(e,i){return o(e,i,"esriSpatialRelWithin",t.standardFunctionAsync)},t.functions.touches=function(e,i){return o(e,i,"esriSpatialRelTouches",t.standardFunctionAsync)},t.functions.crosses=function(e,i){return o(e,i,"esriSpatialRelCrosses",t.standardFunctionAsync)},t.functions.relate=function(e,i){return t.standardFunctionAsync(e,i,(m,S,n)=>{if(n=R(n),y(n,3,3,e,i),c(n[0])&&c(n[1]))return F(n[0],n[1],f(n[2]));if(n[0]instanceof s&&n[1]===null||n[1]instanceof s&&n[0]===null)return!1;if(a(n[0])&&n[1]===null)return new l({parentfeatureset:n[0]});if(a(n[1])&&n[0]===null)return new l({parentfeatureset:n[1]});if(a(n[0])&&n[1]instanceof s)return n[0].relate(n[1],f(n[2]));if(a(n[1])&&n[0]instanceof s)return n[1].relate(n[0],f(n[2]));if(n[0]===null&&n[1]===null)return!1;throw new u(e,p.InvalidParameter,i)})})}export{yr as registerFunctions};
