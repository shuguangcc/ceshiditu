import{b as j,m as w}from"./mathUtils-2519596a.js";import{v as C,y as z,x as Z}from"./quat-5b263584.js";import{e as S}from"./quatf64-7fd38d64.js";import{r as q,_ as G,z as B,k as D,S as M}from"./vec3-a020a6f6.js";import{s as H}from"./Error-653283ae.js";import{t as E}from"./typedArrayUtil-a8b5b3e9.js";import{a as O,o as R,g as V,B as b}from"./mat3-3fc68e72.js";import{e as I}from"./mat3f64-c6305894.js";import{e as J}from"./mat4f64-1e28eae0.js";import{n as L}from"./vec3f64-2f9cef06.js";import{x as N,Z as v}from"./projection-d7b57a6c.js";import{a as _}from"./unitUtils-47abac71.js";import{e as K,u as Q,P as X,s as rr}from"./Extent-69509002.js";import{i,T as s}from"./BufferView-646ba1de.js";import{t as or,r as Y,o as k}from"./vec33-ce3aa99b.js";function F(r=tr){return[r[0],r[1],r[2],r[3]]}function $r(r,o,e=F()){return q(e,r),e[3]=o,e}function Er(r,o,e=F()){return G(e,r,o),B(e,e),e[3]=-D(r,o),e}function _r(r,o,e=F()){return C(P,r,h(r)),C(x,o,h(o)),z(P,x,P),er(e,j(Z(e,P)))}function gr(r){return r}function Cr(r){return r[3]}function h(r){return w(r[3])}function er(r,o){return r[3]=o,r}const tr=[0,0,1,0],P=S(),x=S();F();const d=H.getLogger("esri.geometry.support.meshUtils.normalProjection");function Mr(r,o,e,n,t){return $(n)?(l(y.TO_PCPF,i.fromTypedArray(r),s.fromTypedArray(o),s.fromTypedArray(e),n,i.fromTypedArray(t)),t):(d.error("Cannot convert spatial reference to PCPF"),t)}function Or(r,o,e,n,t){return $(n)?(l(y.FROM_PCPF,i.fromTypedArray(r),s.fromTypedArray(o),s.fromTypedArray(e),n,i.fromTypedArray(t)),t):(d.error("Cannot convert to spatial reference from PCPF"),t)}function Rr(r,o,e){return N(r,o,0,e,_(o),0,r.length/3),e}function vr(r,o,e){return N(r,_(e),0,o,e,0,r.length/3),o}function hr(r,o,e){if(E(r))return o;const n=s.fromTypedArray(r),t=s.fromTypedArray(o);return or(t,n,e),o}function xr(r,o,e){if(E(r))return o;V(f,e);const n=i.fromTypedArray(r),t=i.fromTypedArray(o);return Y(t,n,f),b(f)||k(t,t),o}function Sr(r,o,e){if(E(r))return o;V(f,e);const n=i.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),t=i.fromTypedArray(o,4*Float32Array.BYTES_PER_ELEMENT);if(Y(t,n,f),b(f)||k(t,t),r!==o)for(let a=3;a<r.length;a+=4)o[a]=r[a];return o}function Br(r,o,e,n,t){if(!$(n))return d.error("Cannot convert spatial reference to PCPF"),t;l(y.TO_PCPF,i.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),s.fromTypedArray(o),s.fromTypedArray(e),n,i.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT));for(let a=3;a<r.length;a+=4)t[a]=r[a];return t}function Vr(r,o,e,n,t){if(!$(n))return d.error("Cannot convert to spatial reference from PCPF"),t;l(y.FROM_PCPF,i.fromTypedArray(r,16),s.fromTypedArray(o),s.fromTypedArray(e),n,i.fromTypedArray(t,16));for(let a=3;a<r.length;a+=4)t[a]=r[a];return t}function l(r,o,e,n,t,a){if(!o)return;const g=e.count,p=_(t);if(U(t))for(let m=0;m<g;m++)n.getVec(m,T),o.getVec(m,u),v(p,T,A,p),O(f,A),r===y.FROM_PCPF&&R(f,f),M(u,u,f),a.setVec(m,u);else for(let m=0;m<g;m++){n.getVec(m,T),o.getVec(m,u),v(p,T,A,p),O(f,A);const W=K(e.get(m,1));let c=Math.cos(W);r===y.TO_PCPF&&(c=1/c),f[0]*=c,f[1]*=c,f[2]*=c,f[3]*=c,f[4]*=c,f[5]*=c,r===y.FROM_PCPF&&R(f,f),M(u,u,f),B(u,u),a.setVec(m,u)}return a}function $(r){return U(r)||nr(r)}function U(r){return r.isWGS84||Q(r)||X(r)||rr(r)}function nr(r){return r.isWebMercator}var y;(function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF"})(y||(y={}));const T=L(),u=L(),A=J(),f=I();export{Vr as L,Rr as M,vr as O,hr as R,Sr as V,F as a,_r as b,$r as c,gr as g,Or as h,Mr as j,Br as k,Cr as l,Er as q,xr as v,h as x};
